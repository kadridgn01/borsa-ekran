<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gelişmiş Terminal Ekranı</title>
    <style>
        :root {
            --bg-color: #131722;
            --panel-bg: #1e222d;
            --border-color: #363a45;
            --text-color: #d1d4dc;
            --text-muted: #787b86;
            --color-up: #26a69a;      /* Yeşil Mum */
            --color-down: #ef5350;    /* Kırmızı Mum */
            --color-up-bg: rgba(38, 166, 154, 0.2);
            --color-down-bg: rgba(239, 83, 80, 0.2);
            --color-purple-line: #c38fff;
        }

        html, body {
            height: 100%;
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow: hidden;
        }

        /* --- ANA ARAYÜZ YAPISI --- */
        .main-container {
            display: grid;
            height: 100vh;
            grid-template-columns: 1fr 340px; /* Grafik Alanı | Sağ Sidebar */
            grid-template-rows: 40px 1fr;     /* Toolbar | İçerik */
            grid-template-areas:
                "toolbar toolbar"
                "charts sidebar";
            gap: 8px;
            padding: 8px;
            box-sizing: border-box;
        }

        /* --- 1. ÜST TOOLBAR --- */
        .terminal-toolbar {
            grid-area: toolbar;
            background-color: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            display: flex;
            align-items: center;
            padding: 0 10px;
        }
        .toolbar-btn {
            padding: 5px 10px; font-size: 14px; margin-right: 8px;
            border-radius: 4px; cursor: pointer; color: var(--text-muted);
        }
        .toolbar-btn.active { background: #2962ff; color: #fff; }

        /* --- 2. GRAFİK ALANI (2x2 GRID) --- */
        .chart-grid-container {
            grid-area: charts;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 8px;
            min-height: 0;
        }

        .chart-panel {
            background-color: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chart-header {
            flex-shrink: 0; padding: 10px 12px; font-weight: 600;
            border-bottom: 1px solid var(--border-color); font-size: 14px;
        }

        .chart-content {
            flex-grow: 1; position: relative;
        }
        
        /* --- STATİK MUM GRAFİĞİ (SVG) --- */
        .static-chart {
            width: 100%; height: 100%;
            position: absolute;
        }
        .static-chart .grid-line { stroke: #2a2e39; stroke-width: 0.5; }
        .static-chart .axis-text { font-size: 10px; fill: var(--text-muted); }
        .static-chart .candle-wick { stroke: var(--text-muted); stroke-width: 1; }
        .static-chart .candle-up { fill: var(--color-up); }
        .static-chart .candle-down { fill: var(--color-down); }
        .static-chart .ma-line { stroke: var(--color-purple-line); stroke-width: 1.5; fill: none; }

        /* --- 3. SAĞ SIDEBAR (ÇOKLU PANEL) --- */
        .sidebar-container {
            grid-area: sidebar;
            display: grid;
            grid-template-rows: 40% 35% 25%; /* Liste | Detay | Performans */
            gap: 8px;
            min-height: 0;
        }
        
        .panel {
            background-color: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        .panel-header {
            flex-shrink: 0; padding: 10px 12px; font-weight: 600;
            border-bottom: 1px solid var(--border-color); font-size: 13px;
        }
        .panel-content {
            overflow-y: auto; flex-grow: 1;
        }
        
        /* İzleme Listesi */
        .watchlist-table { width: 100%; border-collapse: collapse; }
        .watchlist-table th {
            font-size: 11px; color: var(--text-muted); padding: 8px 6px;
            text-align: left; border-bottom: 1px solid var(--border-color);
            position: sticky; top: 0; background: var(--panel-bg);
        }
        .watchlist-table th.col-right { text-align: right; }
        
        .watchlist-item td {
            padding: 7px 6px; border-bottom: 1px solid #2a2e39; font-size: 13px;
        }
        .watchlist-item .symbol { font-weight: 600; color: #5c9cf6; }
        .watchlist-item .price { text-align: right; font-weight: 500; }
        .watchlist-item .change { text-align: right; font-weight: 600; }

        /* Detay Paneli */
        .quote-panel { padding: 10px; }
        .quote-header {
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid var(--border-color); padding-bottom: 10px;
        }
        .quote-header h3 { font-size: 18px; margin: 0; }
        .quote-price { font-size: 24px; font-weight: bold; }
        .quote-change { font-size: 16px; font-weight: 600; }
        .quote-details {
            display: grid; grid-template-columns: 1fr 1fr;
            gap: 8px; font-size: 13px; padding-top: 10px;
        }
        .quote-detail { display: flex; justify-content: space-between; }
        .quote-detail .key { color: var(--text-muted); }
        .quote-detail .value { font-weight: 500; }

        /* Performans Paneli */
        .performance-grid {
            display: grid; grid-template-columns: 1fr 1fr 1fr;
            gap: 8px; padding: 10px; text-align: center;
        }
        .perf-box {
            padding: 8px; border-radius: 4px;
        }
        .perf-box .label { font-size: 11px; color: var(--text-muted); margin-bottom: 4px; }
        .perf-box .value { font-size: 16px; font-weight: 600; }
        .perf-up { background-color: var(--color-up-bg); color: var(--color-up); }
        .perf-down { background-color: var(--color-down-bg); color: var(--color-down); }

        /* --- GENEL ANİMASYON VE RENKLER --- */
        .up { color: var(--color-up); }
        .down { color: var(--color-down); }
        .flash-up { animation: flash-green 0.7s ease-out; }
        .flash-down { animation: flash-red 0.7s ease-out; }
        
        @keyframes flash-green {
            0% { background-color: var(--color-up-bg); }
            100% { background-color: transparent; }
        }
        @keyframes flash-red {
            0% { background-color: var(--color-down-bg); }
            100% { background-color: transparent; }
        }
    </style>
</head>
<body>

    <div class="main-container">

        <div class="terminal-toolbar">
            <div class="toolbar-btn active">BIST 100</div>
            <div class="toolbar-btn">S&P 500</div>
            <div class="toolbar-btn">USD/TRY</div>
            <div class="toolbar-btn">ALTIN</div>
            <div class="toolbar-btn" style="margin-left: auto;">1G</div>
        </div>

        <div class="chart-grid-container">
            <div class="chart-panel">
                <div class="chart-header">BIST 100 Endeksi - 1G</div>
                <div class="chart-content">
                    <svg class="static-chart" viewBox="0 0 400 200" preserveAspectRatio="none">
                        <line class="grid-line" x1="0" y1="40" x2="400" y2="40"></line>
                        <text class="axis-text" x="370" y="44">9.100</text>
                        <line class="grid-line" x1="0" y1="80" x2="400" y2="80"></line>
                        <text class="axis-text" x="370" y="84">9.000</text>
                        <line class="grid-line" x1="0" y1="120" x2="400" y2="120"></line>
                        <text class="axis-text" x="370" y="124">8.900</text>
                        <line class="grid-line" x1="0" y1="160" x2="400" y2="160"></line>
                        <text class="axis-text" x="370" y="164">8.800</text>
                        
                        <line class="grid-line" x1="80" y1="0" x2="80" y2="200"></line>
                        <text class="axis-text" x="75" y="195">15 Eyl</text>
                        <line class="grid-line" x1="160" y1="0" x2="160" y2="200"></line>
                        <text class="axis-text" x="155" y="195">16 Eyl</text>
                        <line class="grid-line" x1="240" y1="0" x2="240" y2="200"></line>
                        <text class="axis-text" x="235" y="195">17 Eyl</text>
                        <line class="grid-line" x1="320" y1="0" x2="320" y2="200"></line>
                        <text class="axis-text" x="315" y="195">18 Eyl</text>

                        <line class="candle-wick" x1="20" y1="40" x2="20" y2="70"></line>
                        <rect class="candle-down" x="15" y="50" width="10" height="15"></rect>
                        <line class="candle-wick" x1="40" y1="60" x2="40" y2="90"></line>
                        <rect class="candle-up" x="35" y="70" width="10" height="15"></rect>
                        <line class="candle-wick" x1="60" y1="50" x2="60" y2="80"></line>
                        <rect class="candle-down" x="55" y="60" width="10" height="10"></rect>
                        <line class="candle-wick" x1="80" y1="70" x2="80" y2="110"></line>
                        <rect class="candle-down" x="75" y="80" width="10" height="25"></rect>
                        <line class="candle-wick" x1="100" y1="100" x2="100" y2="130"></line>
                        <rect class="candle-up" x="95" y="110" width="10" height="10"></rect>
                        <line class="candle-wick" x1="120" y1="105" x2="120" y2="145"></line>
                        <rect class="candle-down" x="115" y="115" width="10" height="20"></rect>
                        <line class="candle-wick" x1="140" y1="130" x2="140" y2="170"></line>
                        <rect class="candle-down" x="135" y="140" width="10" height="25"></rect>
                        <line class="candle-wick" x1="160" y1="150" x2="160" y2="180"></line>
                        <rect class="candle-up" x="155" y="160" width="10" height="10"></rect>

                        <polyline class="ma-line" points="20,45 40,75 60,65 80,90 100,115 120,125 140,150 160,165"></polyline>
                    </svg>
                </div>
            </div>
            
            <div class="chart-panel">
                <div class="chart-header">S&P 500 - 1G</div>
                <div class="chart-content">
                    <svg class="static-chart" viewBox="0 0 400 200" preserveAspectRatio="none">
                        <line class="grid-line" x1="0" y1="40" x2="400" y2="40"></line><text class="axis-text" x="370" y="44">5.900</text>
                        <line class="grid-line" x1="0" y1="80" x2="400" y2="80"></line><text class="axis-text" x="370" y="84">5.800</text>
                        <line class="grid-line" x1="0" y1="120" x2="400" y2="120"></line><text class="axis-text" x="370" y="124">5.700</text>
                        <line class="grid-line" x1="0" y1="160" x2="400" y2="160"></line><text class="axis-text" x="370" y="164">5.600</text>
                        <line class="grid-line" x1="80" y1="0" x2="80" y2="200"></line><text class="axis-text" x="75" y="195">15 Eyl</text>
                        <line class="grid-line" x1="160" y1="0" x2="160" y2="200"></line><text class="axis-text" x="155" y="195">16 Eyl</text>
                        <line class="candle-wick" x1="20" y1="40" x2="20" y2="70"></line><rect class="candle-down" x="15" y="50" width="10" height="15"></rect>
                        <line class="candle-wick" x1="40" y1="60" x2="40" y2="90"></line><rect class="candle-up" x="35" y="70" width="10" height="15"></rect>
                        <line class="candle-wick" x1="60" y1="50" x2="60" y2="80"></line><rect class="candle-down" x="55" y="60" width="10" height="10"></rect>
                        <line class="candle-wick" x1="80" y1="70" x2="80" y2="110"></line><rect class="candle-down" x="75" y="80" width="10" height="25"></rect>
                        <line class="candle-wick" x1="100" y1="100" x2="100" y2="130"></line><rect class="candle-up" x="95" y="110" width="10" height="10"></rect>
                        <line class="candle-wick" x1="120" y1="105" x2="120" y2="145"></line><rect class="candle-down" x="115" y="115" width="10" height="20"></rect>
                        <polyline class="ma-line" points="20,45 40,75 60,65 80,90 100,115 120,125 140,150 160,165"></polyline>
                    </svg>
                </div>
            </div>
            
            <div class="chart-panel">
                <div class="chart-header">USD/TRY - 1G</div>
                <div class="chart-content">
                    <svg class="static-chart" viewBox="0 0 400 200" preserveAspectRatio="none">
                        <line class="grid-line" x1="0" y1="40" x2="400" y2="40"></line><text class="axis-text" x="370" y="44">35.00</text>
                        <line class="grid-line" x1="0" y1="80" x2="400" y2="80"></line><text class="axis-text" x="370" y="84">34.00</text>
                        <line class="grid-line" x1="0" y1="120" x2="400" y2="120"></line><text class="axis-text" x="370" y="124">33.00</text>
                        <line class="grid-line" x1="0" y1="160" x2="400" y2="160"></line><text class="axis-text" x="370" y="164">32.00</text>
                        <line class="grid-line" x1="80" y1="0" x2="80" y2="200"></line><text class="axis-text" x="75" y="195">15 Eyl</text>
                        <line class="grid-line" x1="160" y1="0" x2="160" y2="200"></line><text class="axis-text" x="155" y="195">16 Eyl</text>
                        <line class="candle-wick" x1="20" y1="40" x2="20" y2="70"></line><rect class="candle-down" x="15" y="50" width="10" height="15"></rect>
                        <line class="candle-wick" x1="40" y1="60" x2="40" y2="90"></line><rect class="candle-up" x="35" y="70" width="10" height="15"></rect>
                        <line class="candle-wick" x1="60" y1="50" x2="60" y2="80"></line><rect class="candle-down" x="55" y="60" width="10" height="10"></rect>
                        <line class="candle-wick" x1="80" y1="70" x2="80" y2="110"></line><rect class="candle-down" x="75" y="80" width="10" height="25"></rect>
                        <line class="candle-wick" x1="100" y1="100" x2="100" y2="130"></line><rect class="candle-up" x="95" y="110" width="10" height="10"></rect>
                        <line class="candle-wick" x1="120" y1="105" x2="120" y2="145"></line><rect class="candle-down" x="115" y="115" width="10" height="20"></rect>
                        <polyline class="ma-line" points="20,45 40,75 60,65 80,90 100,115 120,125 140,150 160,165"></polyline>
                    </svg>
                </div>
            </div>
            
            <div class="chart-panel">
                <div class="chart-header">ALTIN (ONS) - 1G</div>
                <div class="chart-content">
                    <svg class="static-chart" viewBox="0 0 400 200" preserveAspectRatio="none">
                        <line class="grid-line" x1="0" y1="40" x2="400" y2="40"></line><text class="axis-text" x="370" y="44">2800</text>
                        <line class="grid-line" x1="0" y1="80" x2="400" y2="80"></line><text class="axis-text" x="370" y="84">2750</text>
                        <line class="grid-line" x1="0" y1="120" x2="400" y2="120"></line><text class="axis-text" x="370" y="124">2700</text>
                        <line class="grid-line" x1="0" y1="160" x2="400" y2="160"></line><text class="axis-text" x="370" y="164">2650</text>
                        <line class="grid-line" x1="80" y1="0" x2="80" y2="200"></line><text class="axis-text" x="75" y="195">15 Eyl</text>
                        <line class="grid-line" x1="160" y1="0" x2="160" y2="200"></line><text class="axis-text" x="155" y="195">16 Eyl</text>
                        <line class="candle-wick" x1="20" y1="40" x2="20" y2="70"></line><rect class="candle-down" x="15" y="50" width="10" height="15"></rect>
                        <line class="candle-wick" x1="40" y1="60" x2="40" y2="90"></line><rect class="candle-up" x="35" y="70" width="10" height="15"></rect>
                        <line class="candle-wick" x1="60" y1="50" x2="60" y2="80"></line><rect class="candle-down" x="55" y="60" width="10" height="10"></rect>
                        <line class="candle-wick" x1="80" y1="70" x2="80" y2="110"></line><rect class="candle-down" x="75" y="80" width="10" height="25"></rect>
                        <line class="candle-wick" x1="100" y1="100" x2="100" y2="130"></line><rect class="candle-up" x="95" y="110" width="10" height="10"></rect>
                        <line class="candle-wick" x1="120" y1="105" x2="120" y2="145"></line><rect class="candle-down" x="115" y="115" width="10" height="20"></rect>
                        <polyline class="ma-line" points="20,45 40,75 60,65 80,90 100,115 120,125 140,150 160,165"></polyline>
                    </svg>
                </div>
            </div>

        </div>

        <div class="sidebar-container">
            <div class="panel" id="watchlist">
                <div class="panel-header">İzleme Listesi</div>
                <div class="panel-content">
                    <table class="watchlist-table">
                        <thead>
                            <tr>
                                <th>Sembol</th>
                                <th class="col-right">Fiyat</th>
                                <th class="col-right">Değ. %</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="watchlist-item" data-price="42.21">
                                <td><span class="symbol">DXY</span></td>
                                <td class="price">...</td><td class="change">...</td>
                            </tr>
                            <tr class="watchlist-item" data-price="39590.65">
                                <td><span class="symbol">DJI</span></td>
                                <td class="price">...</td><td class="change">...</td>
                            </tr>
                            <tr class="watchlist-item" data-price="5837.91">
                                <td><span class="symbol">SPX</span></td>
                                <td class="price">...</td><td class="change">...</td>
                            </tr>
                            <tr class="watchlist-item" data-price="231.67">
                                <td><span class="symbol">AAPL</span></td>
                                <td class="price">...</td><td class="change">...</td>
                            </tr>
                            <tr class="watchlist-item" data-price="759.44">
                                <td><span class="symbol">NFLX</span></td>
                                <td class="price">...</td><td class="change">...</td>
                            </tr>
                            <tr class="watchlist-item" data-price="259.52">
                                <td><span class="symbol">TSLA</span></td>
                                <td class="price">...</td><td class="change">...</td>
                            </tr>
                            <tr class="watchlist-item" data-price="2780.55">
                                <td><span class="symbol">GOLD</span></td>
                                <td class="price">...</td><td class="change">...</td>
                            </tr>
                            <tr class="watchlist-item" data-price="34.13">
                                <td><span class="symbol">SILVER</span></td>
                                <td class="price">...</td><td class="change">...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="panel" id="quote-panel">
                <div class="panel-header">XU100</div>
                <div class="panel-content quote-panel">
                    <div class="quote-header">
                        <h3>BIST 100 Endeksi</h3>
                        <div id="quote-main">
                            <div class="quote-price up">...</div>
                            <div class="quote-change up">...</div>
                        </div>
                    </div>
                    <div class="quote-details">
                        <div class="quote-detail"><span class="key">Açılış</span><span class="value" id="quote-open">...</span></div>
                        <div class="quote-detail"><span class="key">Yüksek</span><span class="value" id="quote-high">...</span></div>
                        <div class="quote-detail"><span class="key">Düşük</span><span class="value" id="quote-low">...</span></div>
                        <div class="quote-detail"><span class="key">Önceki Kpn.</span><span class="value" id="quote-prev">9.008,85</span></div>
                        <div class="quote-detail"><span class="key">Gün Aralığı</span><span class="value" id="quote-range">...</span></div>
                        <div class="quote-detail"><span class="key">52H Aralığı</span><span class="value">7.202 - 11.252</span></div>
                    </div>
                </div>
            </div>
            <div class="panel" id="performance">
                <div class="panel-header">Performans</div>
                <div class="panel-content performance-grid">
                    <div class="perf-box perf-up"><div class="label">1G</div><div class="value" id="perf-1d">+1.78%</div></div>
                    <div class="perf-box perf-up"><div class="label">1H</div><div class="value" id="perf-1w">+5.22%</div></div>
                    <div class="perf-box perf-down"><div class="label">1A</div><div class="value" id="perf-1m">-2.50%</div></div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- CANLI VERİ SİMÜLASYONU ---
        
        // Rastgele sayı üretme (daha gerçekçi dalgalanma için)
        function getFluctuation(basePrice) {
            return (Math.random() - 0.48) * (basePrice * 0.01); // %1'lik dalgalanma
        }
        
        // Fiyatı formatlama
        function formatPrice(price, base) {
             const decimals = (base.toString().split('.')[1] || '').length;
             return price.toLocaleString('tr-TR', { 
                    minimumFractionDigits: decimals, 
                    maximumFractionDigits: decimals 
                });
        }
        
        // Yüzdeyi formatlama
        function formatChange(percent) {
            let text = `${percent.toFixed(2)}%`;
            return (percent >= 0) ? `+${text}` : text;
        }
        
        // Renk class'ı uygulama
        function applyChangeClass(element, value) {
            element.classList.remove('up', 'down');
            if (value >= 0) {
                element.classList.add('up');
            } else {
                element.classList.add('down');
            }
        }

        // 1. İzleme Listesini Güncelle
        function simulateWatchlistUpdate() {
            document.querySelectorAll('.watchlist-item').forEach(item => {
                const priceElement = item.querySelector('.price');
                const changeElement = item.querySelector('.change');
                const basePrice = parseFloat(item.dataset.price);
                
                const newPrice = basePrice + getFluctuation(basePrice);
                const percentChange = ((newPrice - basePrice) / basePrice) * 100;

                priceElement.textContent = formatPrice(newPrice, basePrice);
                changeElement.textContent = formatChange(percentChange);
                
                applyChangeClass(priceElement, percentChange);
                applyChangeClass(changeElement, percentChange);

                // Animasyon
                item.classList.remove('flash-up', 'flash-down');
                item.classList.add(percentChange >= 0 ? 'flash-up' : 'flash-down');
            });
        }

        // 2. Ana Detay Panelini Güncelle
        function simulateQuoteUpdate() {
            const basePrice = 9008.85;
            const newPrice = basePrice + getFluctuation(basePrice) * 10; // Daha büyük dalgalanma
            const change = newPrice - basePrice;
            const percentChange = (change / basePrice) * 100;
            
            const highPrice = Math.max(basePrice * 1.01, newPrice);
            const lowPrice = Math.min(basePrice * 0.99, newPrice);
            
            const priceEl = document.querySelector('#quote-price');
            const changeEl = document.querySelector('#quote-change');
            
            priceEl.textContent = formatPrice(newPrice, basePrice);
            changeEl.textContent = `${formatPrice(change, basePrice)} (${formatChange(percentChange)})`;
            
            applyChangeClass(priceEl, change);
            applyChangeClass(changeEl, change);
            
            document.getElementById('quote-open').textContent = formatPrice(basePrice * 0.995, basePrice);
            document.getElementById('quote-high').textContent = formatPrice(highPrice, basePrice);
            document.getElementById('quote-low').textContent = formatPrice(lowPrice, basePrice);
            document.getElementById('quote-range').textContent = `${formatPrice(lowPrice, basePrice)} - ${formatPrice(highPrice, basePrice)}`;
        }
        
        // 3. Performans Panelini Güncelle
        function simulatePerformanceUpdate() {
            const perf1d = (Math.random() - 0.3) * 3;
            const perf1w = (Math.random() - 0.4) * 10;
            const perf1m = (Math.random() - 0.6) * 5;
            
            const el1d = document.getElementById('perf-1d');
            const el1w = document.getElementById('perf-1w');
            const el1m = document.getElementById('perf-1m');
            
            el1d.textContent = formatChange(perf1d);
            el1w.textContent = formatChange(perf1w);
            el1m.textContent = formatChange(perf1m);
            
            applyChangeClass(el1d.parentElement, perf1d);
            applyChangeClass(el1w.parentElement, perf1w);
            applyChangeClass(el1m.parentElement, perf1m);
        }

        // Simülasyonları Başlat
        setInterval(() => {
            simulateWatchlistUpdate();
            simulateQuoteUpdate();
            simulatePerformanceUpdate();
        }, 1500); // 1.5 saniyede bir tüm panelleri güncelle
        
        document.addEventListener('DOMContentLoaded', () => {
            simulateWatchlistUpdate();
            simulateQuoteUpdate();
            simulatePerformanceUpdate();
        });
    </script>

</body>
</html>
